'use strict';Vue.component('calendar',{props:{events:{type:Array,required:!0},displayEvent:{type:Function,required:!0}},template:'\n        <div id="calendar"></div>\n    ',mounted:function mounted(){var a=this;$('#calendar').fullCalendar({header:{left:'prevYear,nextYear',center:'title',right:'today prev,next'},theme:!0,eventStartEditable:!1,eventDurationEditable:!1,eventClick:function eventClick(b){a.displayEvent(b)},events:this.loadEvents})},beforeDestroy:function beforeDestroy(){$('#calendar').fullCalendar('destory')},methods:{loadEvents:function loadEvents(a,b,c,d){var e=a.valueOf(),f=b.valueOf(),g=this.events.filter(function(h){return h.start.getTime()>=e&&h.start.getTime()<=f});d(g)}}});var HabitDetails={props:{hash:{type:String,required:!0}},template:'\n        <div style="padding-bottom: 30px; font-family: \'Lobster\', cursive; margin-top: 20px" v-if="habit" class="container">\n\n            <calendar-modal v-if="dayData" v-on:destroy-modal="destroyModal" :success="dayData.success" :day-description="dayData.title" :save-data="updateEvent"></calendar-modal>\n            \n            <div><router-link to="/user/dashboard"><i class="material-icons" style="font-size: 40px">arrow_back</i></router-link></div>\n            <h4 class="center">{{habit.title}}</h4>\n            <div class="center grey-text" v-html="habit.description"></div>\n            <div>Max Streak: {{habit.maxStreak}}</div>\n            <div>Start Date: {{habit.startDate}}</div>\n\n            <div class="center" v-if="!habit.foreverHabit">You have a lot of time but better work hard...</div>\n            <div class="center" v-else>Looks like you have only {{habit.daysLeft}} days left. So rather not waste time...</div>\n            \n            <calendar :events="events" :displayEvent="showEvent"></calendar>\n\n        </div>\n        <div v-else class="center" style="margin-top: 40px">\n            <load-animation></load-animation>\n        </div>\n    ',watch:{$route:'fetchHabit'},mounted:function mounted(){this.fetchHabit()},methods:{fetchHabit:function fetchHabit(){var a=this;$.ajax({type:'GET',url:'/habits/one/'+this.hash,success:function success(b){if(b.success){a.habit=new BitBreaks(b.bitBreak,b.maxStreak);for(var c=[],d=0;d<a.habit.dailyStatus.length;d++)c.push(new CalendarDates(a.habit.dailyStatus[d],a.habit.startDate,d));a.events=c}else messageUtility.showMessages(b.message)},error:function error(b){messageUtility.handleError(b)}})},destroyModal:function destroyModal(){$('#calendarModal').modal('close'),this.dayData=null},showEvent:function showEvent(a){this.dayData=a},updateEvent:function updateEvent(a,b){var c=this,d=this.habit.hash,e=utilityFunctions.dateDiffAbsolute(new Date,this.dayData.start._d);return null===d||void 0===d?void messageUtility.showMessages('You\'re not playing fair!!!'):null===e||void 0===e||null===a||void 0===a||null===b||void 0===b?void messageUtility.showMessages('All fields are required. Please fill all of them'):120<b.length?void messageUtility.showMessages('Message length too long. Please reduce the size...'):void $.ajax({type:'PATCH',contentType:'application/json',url:'/habits/one/'+d,data:JSON.stringify({success:a,dayQuote:b,setDate:e}),success:function success(f){f.success?(c.dayData.success=f.updatedStatus.success,c.dayData.title=f.updatedStatus.quote,c.dayData.color=f.updatedStatus.success?'green':'red',$('#calendar').fullCalendar('updateEvent',c.dayData),$('#calendarModal').modal('close'),c.dayData=null):messageUtility.showMessages(f.message)},error:function error(f){messageUtility.handleError(f)}})}},data:function data(){return{habit:null,events:[],dayData:null}}};